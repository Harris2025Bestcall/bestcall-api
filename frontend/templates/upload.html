{% extends "base.html" %}
{% block content %}
  <h2 class="page-title">Manual Upload</h2>

  <div class="card full-width">
    <form id="manualUploadForm">
      <label>ðŸ“„ Credit Application PDF</label>
      <input type="file" name="credit_app" required /><br><br>

      <label>ðŸ“„ Credit Report PDF</label>
      <input type="file" name="credit_report" required /><br><br>

      <button type="submit">Submit for Prediction</button>
    </form>
  </div>

  <script>
    const form = document.getElementById('manualUploadForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);

      const res = await fetch("/upload/", {
        method: "POST",
        headers: {
          "x-api-key": "your-api-key-here"
        },
        body: formData
      });

      const data = await res.json();
      if (data.client_id) {
        window.location.href = `/client/results?client_id=${data.client_id}`;
      } else {
        alert("Upload failed. Please try again.");
      }
    });
  </script>
{% endblock %}
