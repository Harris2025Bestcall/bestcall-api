{% extends "base.html" %}
{% block content %}
  <h2 class="page-title">Login</h2>

  <div class="card full-width">
    <form id="loginForm">
      <label>Email</label>
      <input type="email" name="email" required /><br><br>

      <label>Password</label>
      <input type="password" name="password" required /><br><br>

      <button type="submit">Log In</button>
    </form>
  </div>

  <script>
    document.getElementById("loginForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);

      const res = await fetch("/auth/login", {
        method: "POST",
        body: formData,
        redirect: "follow"
      });

      if (res.redirected) {
        window.location.href = res.url;
      } else {
        alert("Invalid login. Please try again.");
      }
    });
  </script>
{% endblock %}
