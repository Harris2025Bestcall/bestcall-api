{% extends "admin/base_system_ops.html" %}

{% block title %}AI Performance Logs - BestCall AI{% endblock %}

{% block content %}
  <h1>AI Model Performance</h1>

  <div id="logContainer">
    <p>Loading performance logs...</p>
  </div>

  <script>
    async function loadPerformanceLogs() {
      const token = localStorage.getItem("access_token");
      const res = await fetch("/admin/performance/data", {
        headers: {
          Authorization: "Bearer " + token
        }
      });

      if (!res.ok) {
        document.getElementById("logContainer").innerText = "Failed to load performance data.";
        return;
      }

      const logs = await res.json();
      if (!logs.length) {
        document.getElementById("logContainer").innerHTML = "<p>No logs available.</p>";
        return;
      }

      let html = "<table border='1'><tr><th>Client ID</th><th>Matched</th><th>Total</th><th>Accuracy</th></tr>";
      for (const log of logs) {
        html += `<tr>
                   <td>${log.client_id}</td>
                   <td>${log.matched}</td>
                   <td>${log.total}</td>
                   <td>${log.accuracy}</td>
                 </tr>`;
      }
      html += "</table>";

      document.getElementById("logContainer").innerHTML = html;
    }

    loadPerformanceLogs();
  </script>
{% endblock %}
