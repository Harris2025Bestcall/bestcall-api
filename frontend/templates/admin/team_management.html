{% extends "admin/base_system_ops.html" %}

{% block title %}Team Management - BestCall AI{% endblock %}

{% block content %}
  <h1>Team Management</h1>

  <h2>Create New User</h2>
  <form method="post" action="/create_user" onsubmit="return createUser(event)">
    <label>Email: <input type="email" name="email" required></label><br>
    <label>Name: <input type="text" name="name" required></label><br>
    <label>Password: <input type="password" name="password" required></label><br>
    <button type="submit">Create User</button>
  </form>

  <p id="createStatus" style="margin-top: 10px;"></p>

  <script>
    async function createUser(event) {
      event.preventDefault();
      const form = event.target;
      const data = new FormData(form);
      const token = localStorage.getItem("access_token");

      const res = await fetch("/create_user", {
        method: "POST",
        headers: { Authorization: "Bearer " + token },
        body: data
      });

      const status = document.getElementById("createStatus");
      if (res.ok) {
        status.innerText = "✅ User created successfully.";
        form.reset();
      } else {
        const msg = await res.json();
        status.innerText = "❌ " + (msg.detail || "Error creating user.");
      }
    }
  </script>

{% endblock %}